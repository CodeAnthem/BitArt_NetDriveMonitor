<UserControl
	x:Class="WPF.AppUI.EditDrives.EditDrivesView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:WPF.AppUI.EditDrives"
	xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
	xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:validation="clr-namespace:WPF.AppUI.Validation"
	d:DataContext="{d:DesignInstance Type=local:EditDrivesViewModel}"
	d:DesignHeight="450" d:DesignWidth="800"
	mc:Ignorable="d">
	<Grid>

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<!--  Header & Buttons  -->
		<Grid Grid.Row="0" Margin="0,0,0,10">

			<materialDesign:Card>

				<Grid>

					<Grid.RowDefinitions>
						<RowDefinition Height="45" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>

					<Grid.Resources>
						<Style TargetType="Grid">
							<Setter Property="VerticalAlignment" Value="Center" />
						</Style>
					</Grid.Resources>

					<Grid Grid.Column="0">
						<StackPanel HorizontalAlignment="Left" Orientation="Vertical">
							<TextBlock Style="{DynamicResource MaterialDesignHeadline6TextBlock}" Text="Manage Drives" />
							<StackPanel Orientation="Horizontal">

								<StackPanel Orientation="Horizontal">
									<StackPanel.Resources>
										<Style x:Key="CoreStatus" BasedOn="{StaticResource MaterialDesignHelperTextBlock}" TargetType="TextBlock">
											<Setter Property="Foreground" Value="Red" />
											<Setter Property="Text" Value="Not Ready" />
											<Style.Triggers>
												<DataTrigger Binding="{Binding IsCoreEnabled, Mode=OneWay}" Value="True">
													<Setter Property="Foreground" Value="Green" />
													<Setter Property="Text" Value="Ready" />
												</DataTrigger>
											</Style.Triggers>
										</Style>
									</StackPanel.Resources>

									<TextBlock Style="{DynamicResource MaterialDesignHelperTextBlock}" Text="Status" />
									<Separator Margin="2" />
									<TextBlock Style="{DynamicResource CoreStatus}" />
								</StackPanel>

								<Separator Margin="5" />
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="Drives amount:" />
									<Separator Margin="2" />
									<TextBlock Style="{StaticResource MaterialDesignHelperTextBlock}" Text="{Binding ConfiguredDrives.Count}" />
								</StackPanel>
							</StackPanel>
						</StackPanel>
					</Grid>

					<Grid Grid.Column="1">
						<StackPanel HorizontalAlignment="Center" Orientation="Horizontal" />
					</Grid>

					<Grid Grid.Column="2">

						<StackPanel HorizontalAlignment="Right" Orientation="Horizontal">

							<Button Content="Save"
								Width="auto"
								Command="{Binding NavigateSaveCommand}"
								Style="{DynamicResource MahApps.Styles.Button.Dialogs.Accent}"
								ToolTip="Save configured network drives" />

							<Separator Margin="16,0" />

							<Button Content="Cancel"
								Width="auto"
								Command="{Binding NavigateCancelCommand}"
								Style="{DynamicResource MahApps.Styles.Button.Dialogs.Accent}"
								ToolTip="Abord the changes" />

						</StackPanel>

					</Grid>

				</Grid>

			</materialDesign:Card>

		</Grid>

		<!--  Datagrid & Add Drives  -->
		<Grid Grid.Row="1" Margin="0,0,0,16">
			<Border
				Padding="10"
				Background="{DynamicResource MahApps.Brushes.Menu.Background}"
				BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
				BorderThickness="2" CornerRadius="20">

				<Grid HorizontalAlignment="Stretch">
					<Grid.RowDefinitions>
						<RowDefinition Height="*" />
						<RowDefinition Height="Auto" />
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>

					<!--  DataGrid  -->
					<Grid Grid.Row="0">

						<Grid.Resources>
							<Style x:Key="DriveGridHeaderStyle" BasedOn="{StaticResource MahApps.Styles.DataGridColumnHeader.Azure}" TargetType="DataGridColumnHeader">
								<Setter Property="HorizontalContentAlignment" Value="Center" />
							</Style>

							<Style x:Key="DriveGridCellStyle" BasedOn="{StaticResource MahApps.Styles.DataGridCell.Azure}" TargetType="DataGridCell">
								<Setter Property="Focusable" Value="False" />
								<Setter Property="HorizontalContentAlignment" Value="Center" />
							</Style>

							<Style x:Key="DriveGridButtonCellStyle" BasedOn="{StaticResource MahApps.Styles.DataGridCell}" TargetType="DataGridCell">
								<Setter Property="Width" Value="auto" />
								<Setter Property="Margin" Value="10,0,0,0" />
								<Setter Property="Visibility" Value="Visible" />
								<Setter Property="Focusable" Value="False" />

								<Setter Property="HorizontalContentAlignment" Value="Center" />
							</Style>
						</Grid.Resources>

						<DataGrid
							Width="auto"
							AutoGenerateColumns="False"
							Background="{DynamicResource MahApps.Brushes.Menu.Background}"
							CanUserAddRows="True" CanUserDeleteRows="True"
							ColumnHeaderStyle="{DynamicResource DriveGridHeaderStyle}"
							FontSize="15" GridLinesVisibility="Horizontal"
							IsReadOnly="False"
							ItemsSource="{Binding ConfiguredDrives, Mode=TwoWay}"
							SelectedItem="{Binding SelectedDrive}"
							SelectionMode="Single" SelectionUnit="FullRow"
							Style="{DynamicResource MahApps.Styles.DataGrid.Azure}">
							<DataGrid.Columns>

								<DataGridTemplateColumn
									Width="auto"
									CanUserReorder="False" CanUserResize="False"
									Header="Delete">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<Button Background="Transparent" BorderBrush="Transparent" Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.DeleteDriveCommand}">
												<Image Source="/Resources/Assets/Icons/red-cross.png" />
											</Button>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>

								<DataGridTemplateColumn Header="Letter2">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<!--<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.DriveLettersList}" SelectedItem="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=Info.Letter}" />-->
											<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.DriveLettersList}" SelectedItem="{Binding Info.Letter}" />
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>

								</DataGridTemplateColumn>

								<DataGridTextColumn
									Width="100"
									Binding="{Binding Info.Letter}"
									CanUserReorder="False" CanUserResize="False"
									Header="Letter" />
								<DataGridTextColumn Width="*" Binding="{Binding Info.HostName}" Header="Server" />
								<DataGridTextColumn Width="*" Binding="{Binding Info.Share}" Header="Share" />
								<DataGridCheckBoxColumn Binding="{Binding Options.AutoConnectIfAvailable}" Header="Auto: if available" />
								<DataGridCheckBoxColumn Binding="{Binding Options.AutoConnectLanOnly}" Header="Auto: LAN only" />

							</DataGrid.Columns>
						</DataGrid>
					</Grid>

					<!--  Add new drive  -->
					<Grid Grid.Row="1" VerticalAlignment="Center">
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="Auto" />
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>

						<StackPanel Grid.Row="0" HorizontalAlignment="Center" Orientation="Horizontal">

							<!--  Letter  -->
							<StackPanel Grid.Column="0" Width="100">
								<TextBlock FontSize="18" Text="Drive Letter" />
								<ComboBox
									materialDesign:HintAssist.HelperText="Choose a Letter"
									materialDesign:HintAssist.Hint="Click"
									materialDesign:HintAssist.IsFloating="False"
									FontSize="14"
									ItemsSource="{Binding DriveLettersList}"
									Style="{StaticResource MaterialDesignComboBox}" />
							</StackPanel>

							<!--  HostName  -->
							<StackPanel Grid.Column="1" Width="200" Margin="20,0,20,0">
								<TextBlock FontSize="18" Text="Server" />
								<TextBox
									materialDesign:HintAssist.HelperText="OK"
									materialDesign:HintAssist.Hint="Server"
									FontSize="14"
									Style="{StaticResource MahApps.MaterialDesignTextBox}">
									<TextBox.Text>
										<Binding Path="NewDriveHostName" UpdateSourceTrigger="PropertyChanged">
											<Binding.ValidationRules>
												<validation:NotEmptyValidationRule ValidatesOnTargetUpdated="True" />
											</Binding.ValidationRules>
										</Binding>
									</TextBox.Text>
								</TextBox>
							</StackPanel>

							<!--  Share  -->
							<StackPanel Grid.Column="2" Width="200" Margin="20,0,20,0">
								<TextBlock FontSize="18" Text="Share" />
								<TextBox
									materialDesign:HintAssist.HelperText="OK"
									materialDesign:HintAssist.Hint="Share"
									FontSize="14"
									Style="{StaticResource MahApps.MaterialDesignTextBox}">
									<TextBox.Text>
										<Binding Path="NewDriveHostName" UpdateSourceTrigger="PropertyChanged">
											<Binding.ValidationRules>
												<validation:NotEmptyValidationRule ValidatesOnTargetUpdated="True" />
											</Binding.ValidationRules>
										</Binding>
									</TextBox.Text>
								</TextBox>
							</StackPanel>

						</StackPanel>

						<StackPanel Grid.Row="1" Margin="0,30,0,0">
							<Button x:Name="adf" Width="100" Content="Add drive" />
						</StackPanel>

					</Grid>

				</Grid>
			</Border>
		</Grid>

		<!--  Stats  -->
		<Grid Grid.Row="2" Margin="0,0,0,16" Visibility="Visible">
			<StackPanel Orientation="Horizontal">
				<StackPanel Orientation="Horizontal">
					<TextBlock Foreground="White" Text="Selected Drive = " />
					<TextBlock Foreground="White" Text="{Binding SelectedDrive.Info.Letter}" />
				</StackPanel>
			</StackPanel>
		</Grid>

	</Grid>
</UserControl>
